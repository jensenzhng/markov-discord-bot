# Markov Chain Discord Bot

## What is this?

This Discord bot attempts that generates sentences (that sometimes make sense) based on previous messages in a Discord server. It is based on the [Markov Chain algorithm](https://en.wikipedia.org/wiki/Markov_chain). The bot will randomly send sentences generated from this model.

## How does it work?

```The Markov Chain model is a probabilistic model that is used to generate text. It is based on the idea that a sentence is generated by a sequence of words. The sequence of words is determined by the previous words. The probability of a word is determined by the number of times it is followed by the previous word. ```
 -- Github Copilot (idk where it got this from)

In order for the Markov Chain model to work, it first needs data. For any given sentence, the Markov Chain model will map words in a sequential order to the next word. For example, in the sentence, "The cat is grey and is very big," the Markov Chain model will map "The" to "cat" and "cat" to "grey" and so on. In this implementation, I've mapped this data as key-value pairs in JSON, with values being an array of words that have followed the key. 

If multiple words follow a key, the probability of the next word being chosen is determined by the number of times the key has been followed. Using the previous example sentence, the probability of "grey" being chosen after the word "is" depends on the number of times the word "is" has been followed. In this case, the probability is 1/2. The JSON object would look like this: 

```
{
    ...,
    "is": [
        "grey",
        "big"
    ],
    ...
}
```

You might now ask, how are the sentences generated? Using random numbers, the model will choose a random starting word, and then choose the next word based on the probability of the previous word. If the randomly chosen starting word is "is" like in the example above, the model will generate a random number based on how many entries are in the array (in this case, two) and select the next word based on that index. It repeats this process over and over for the chosen word; if it chose "grey," it would look for "grey" in the JSON and randomly choose from what words usually follow it. 

The more limited the data set, the more similar the sentences will be. That's why we're using Discord - new incoming messages as well as old ones are "training" the model.

## How do I use it?
1. Download the project
2. Navigate to the project's directory
3. Create the following two files:
    * `.env` - put your bot's token in this file with this format: `TOKEN=*token*`
    * `chain.json` - contains the data for the bot, fill it with an empty object before you start the bot (just type `{}`)
4. Install the dependencies by running `npm install`
5. Run the bot with `node index.js`

## Bot commands:
* `!search` - creates a Markov Chain model from the last 1000 messages in the channel you typed the command in
* `!generate` - generates a sentence based on the Markov Chain model
